
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../1_guidelines/">
      
      
        <link rel="next" href="../3_generalising_snakemake/">
      
      
      <link rel="icon" href="../../assets/images/SIB_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>Introduction to Snakemake - Reproducible and Scalable Research with Snakemake</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <!-- Matomo -->
<script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://matomo.sib.swiss/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '220']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#learning-outcomes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../.."> 
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Reproducible and Scalable Research with Snakemake" class="md-header__button md-logo" aria-label="Reproducible and Scalable Research with Snakemake" data-md-component="logo">
      
  <img src="../../assets/images/SIB_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Reproducible and Scalable Research with Snakemake
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction to Snakemake
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sib-swiss/containers-snakemake-training" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sib-swiss/containers-snakemake-training
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Reproducible and Scalable Research with Snakemake" class="md-nav__button md-logo" aria-label="Reproducible and Scalable Research with Snakemake" data-md-component="logo">
      
  <img src="../../assets/images/SIB_logo.svg" alt="logo">

    </a>
    Reproducible and Scalable Research with Snakemake
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sib-swiss/containers-snakemake-training" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sib-swiss/containers-snakemake-training
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../precourse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Precourse preparations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course_schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course schedule
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Course material
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Course material
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Introduction to Snakemake
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Introduction to Snakemake
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Learning outcomes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#material" class="md-nav__link">
    <span class="md-ellipsis">
      Material
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structuring-a-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Structuring a workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-basic-rule" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a basic rule
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-a-workflow-with-a-specific-output" class="md-nav__link">
    <span class="md-ellipsis">
      Executing a workflow with a specific output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-the-input-directive" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the input directive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-workflow-with-several-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a workflow with several rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a workflow with several rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-order-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Rule order matters!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chaining-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Chaining rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-dependencies-can-be-easier-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      Rule dependencies can be easier to write
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_generalising_snakemake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Making a more general-purpose Snakemake workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_optimising_snakemake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decorating and optimising a Snakemake workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_reproducibility_snakemake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Being reproducible with Snakemake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_hpc_snakemake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Snakemake in an HPC environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_debugging_snakemake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional concepts and workflow design/debugging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Learning outcomes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#material" class="md-nav__link">
    <span class="md-ellipsis">
      Material
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structuring-a-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Structuring a workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-basic-rule" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a basic rule
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-a-workflow-with-a-specific-output" class="md-nav__link">
    <span class="md-ellipsis">
      Executing a workflow with a specific output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-the-input-directive" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the input directive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-workflow-with-several-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a workflow with several rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a workflow with several rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-order-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Rule order matters!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chaining-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Chaining rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-dependencies-can-be-easier-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      Rule dependencies can be easier to write
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Introduction to Snakemake</h1>

<h2 id="learning-outcomes">Learning outcomes</h2>
<p><strong>After having completed this chapter you will be able to:</strong></p>
<ul>
<li>Understand the structure of a Snakemake workflow</li>
<li>Write rules and Snakefiles to produce the desired outputs</li>
<li>Chain rules together</li>
<li>Run a Snakemake workflow</li>
</ul>
<h2 id="material">Material</h2>
<p><a class="md-button" href="../../assets/pdf/2_introduction_snakemake.pdf"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64zm384 64H256V0zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16m32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16m32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368"/></svg></span> Download the presentation</a></p>
<h2 id="structuring-a-workflow">Structuring a workflow</h2>
<p>It is advised to implement your code in a directory called <code>workflow</code> (you will learn more about workflow structure in the <a href="../3_generalising_snakemake/#downloading-data-and-setting-up-folder-structure">next series of exercises</a>). Filenames and locations are up to you, but we recommend that you at least group all workflow outputs in a <code>results</code> folder.</p>
<h2 id="exercises">Exercises</h2>
<p>This series of exercises will bear no biological meaning, on purpose: it is designed to explain the fundamentals of Snakemake.</p>
<h3 id="creating-a-basic-rule">Creating a basic rule</h3>
<p>A <strong>rule</strong> is the smallest block of code with which you can build a <strong>workflow</strong>. It is a <strong>set of instructions</strong> to create one or more <strong>output(s)</strong> from zero or more <strong>input(s)</strong>. When a rule is <strong>executed</strong> (in other words, applied to specific input/output file(s)), it is called a <strong>job</strong>. The definition of a rule always starts with the <strong>keyword</strong> <code>rule</code>. Similarly to Python classes and their attributes, rules have <strong>directives</strong>, which contain information about their <strong>properties</strong>.</p>
<p>To create the simplest rule possible, you need at least two <em>directives</em>:</p>
<ul>
<li><code>output</code>: path of the output file</li>
<li><code>shell</code>: shell commands that will create the output when they are executed</li>
</ul>
<p>Other directives will be explained throughout the course.</p>
<p><strong>Exercise:</strong> The following example shows the minimal syntax to implement a rule. What do you think it does? Does it create a file? If so, how is it called?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rule</span> <span class="n">hello_world</span><span class="p">:</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/hello.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;echo &quot;Hello world!&quot; &gt; results/hello.txt&#39;</span>
</code></pre></div></td></tr></table></div>
<details class="success">
<summary>Answer</summary>
<p>This rule uses the <code>echo</code> shell command to print <code>Hello world!</code> in an <strong>output file</strong> called <code>hello.txt</code>, located in the <code>results</code> folder.</p>
</details>
<p>Rules are defined and written in a file called <strong>Snakefile</strong> (note the capital <code>S</code> and the absence of extension in the filename). This file should be located at the workflow root directory (here, <code>workflow/Snakefile</code>).</p>
<h3 id="executing-a-workflow-with-a-specific-output">Executing a workflow with a specific output</h3>
<p>It is now time to execute your first workflow! To do this, you need to tell Snakemake what is your <strong>target</strong>, <em>i.e.</em> what is the <strong>specific output</strong> that you want to generate. A target can be any output from any rule in the workflow.</p>
<p><strong>Exercise:</strong> Create a Snakefile and copy the previous rule in it. Then, execute the workflow with <code>snakemake -c 1 &lt;target&gt;</code>. What value should you use for <code>&lt;target&gt;</code>? Once Snakemake execution is finished, can you locate the output file?</p>
<details class="info">
<summary>What does <code>-c/--cores</code> do?</summary>
<p>The <code>-c/--cores N</code> parameter controls the maximum number of CPU cores used in parallel. If N is omitted or &lsquo;all&rsquo;, Snakemake will use all available CPU cores, which is useful but can also be dangerous on a High Performance Computing (HPC) cluster or a local machine. In case of cluster/cloud execution, this argument sets the maximum number of cores requested from the cluster or cloud scheduler.</p>
</details>
<details class="warning">
<summary>Code indentation in Snakemake</summary>
<p>As Snakemake is built on top of Python, proper <strong>code indentation is crucial</strong>. Wrong indentation often results in cryptic errors. We recommend using <strong>indents of 4 spaces</strong>, but here are two rules that should be followed at all times:</p>
<ul>
<li>Do not mix space and tab indents in a file</li>
<li>Always use the same indent length</li>
</ul>
</details>
<details class="success">
<summary>Answer</summary>
<ul>
<li>The target value is the file you want to generate, here <code>results/hello.txt</code>. The command to execute the workflow is:
<div class="highlight"><pre><span></span><code>snakemake<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>results/hello.txt
</code></pre></div></li>
<li>The output is located in the <code>results</code> folder. You can check the folder content with <code>ls -alh results/</code></li>
<li>You can check the output content with <code>cat results/hello.txt</code></li>
</ul>
</details>
<p>During the workflow execution, Snakemake automatically created the <strong>missing folder</strong> of the output path, <code>results/</code>. If several nested folders are missing (for example, <code>test1/test2/test3/hello.txt</code>), Snakemake will create the <strong>entire folder structure</strong> (<code>test1/test2/test3/</code>).</p>
<p><strong>Exercise:</strong> Re-run the exact same command. What happens?</p>
<details class="success">
<summary>Answer</summary>
<p>Nothing! You get a message saying that Snakemake did not run anything:
<div class="highlight"><pre><span></span><code><span class="n">Building</span> <span class="n">DAG</span> <span class="n">of</span> <span class="n">jobs</span><span class="o">...</span>
<span class="n">Nothing</span> <span class="n">to</span> <span class="n">be</span> <span class="n">done</span> <span class="p">(</span><span class="nb">all</span> <span class="n">requested</span> <span class="n">files</span> <span class="n">are</span> <span class="n">present</span> <span class="ow">and</span> <span class="n">up</span> <span class="n">to</span> <span class="n">date</span><span class="p">)</span><span class="o">.</span>
</code></pre></div>
This is normal, because the desired output is already present and accounted for!</p>
</details>
<details class="info">
<summary>Snakemake re-run policy</summary>
<p>By default, Snakemake runs a job if:</p>
<ul>
<li>A target file explicitly requested in the <code>snakemake</code> command is missing or an intermediate file is missing and is required to produce a target file</li>
<li>It detects input files that have been modified more recently than output files, based on their modification dates. In this case, Snakemake will re-generate existing outputs</li>
<li>Code (including <code>params</code> directive, see <a href="../4_optimising_snakemake/#non-file-parameters">here</a> for more information) has changed since last workflow execution</li>
<li>Computing environment has changed since last workflow execution</li>
</ul>
<p>Snakemake re-runs can be forced:</p>
<ul>
<li>For a specific rule using the <code>-R/--forcerun</code> parameter: <code>snakemake -c 1 -R &lt;rule_name&gt;</code></li>
<li>For a specific target using the <code>-f/--force</code> parameter: <code>snakemake -c 1 -f &lt;target&gt;</code></li>
<li>For <strong>all workflow outputs</strong> using the <code>-F/--forceall</code> parameter: <code>snakemake -c 1 -F</code></li>
</ul>
<p>In practice, Snakemake re-run policy can be altered, but we will not cover this topic in the course (see <a href="https://snakemake.readthedocs.io/en/v8.20.5/executing/cli.html">&ndash;rerun-triggers parameter</a> in Snakemake CLI help and <a href="https://github.com/snakemake/snakemake/issues/1694">this git issue</a> for more information).</p>
</details>
<p>In the previous rule, the values of the two directives are <strong>strings</strong>. In the <code>shell</code> directive (other types of values will be seen later in the course), long strings (which includes software commands) can be written on multiple lines for clarity by encasing each line in quotes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rule</span> <span class="n">long_message</span><span class="p">:</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/long_message.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;echo &quot;I want to print a very very very very very &#39;</span>
        <span class="s1">&#39;very very very long string in my output&quot; &gt; results/long_message.txt&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Here, Snakemake will concatenate the two lines (<em>i.e.</em> paste the two lines together) and execute the resulting command:
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;I want to print a very very very very very very very very very very long string in my output&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>results/long_message.txt
</code></pre></div></p>
<h3 id="understanding-the-input-directive">Understanding the input directive</h3>
<p>Another directive used by most rules is <code>input</code>. It usually indicates a path to a file required by the rule to create the output. In the following example, we wrote a rule that uses the file <code>results/hello.txt</code> as an input, and copies its content to <code>results/copied_file.txt</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rule</span> <span class="n">copy_file</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="s1">&#39;results/hello.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/copied_file.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;cp results/hello.txt results/copied_file.txt&#39;</span>
</code></pre></div></td></tr></table></div>
<p>You will use the <code>input</code> directive in the next exercises.</p>
<h3 id="creating-a-workflow-with-several-rules">Creating a workflow with several rules</h3>
<p>As you may have guessed from the previous rule, the <code>input</code> and <code>output</code> directives allow us to create links (also called <strong>dependencies</strong>) between rules and files. Here, the <code>input</code> of rule <code>copy_file</code> requires the <code>output</code> of rule <code>hello_world</code>. In other terms, this is&hellip; <strong>a workflow</strong>! Let&rsquo;s build one with two rules and run it!</p>
<h4 id="rule-order-matters">Rule order matters!</h4>
<p><strong>Exercise:</strong> Add the rule <code>copy_file</code> to your Snakefile, <strong>after</strong> rule <code>hello_world</code>. Then, run the workflow <strong>without specifying an output</strong> with <code>snakemake -c 1</code>. What happens?</p>
<details class="tip">
<summary>Your Snakefile should look like this</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rule</span> <span class="n">hello_world</span><span class="p">:</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/hello.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;echo &quot;Hello world!&quot; &gt; results/hello.txt&#39;</span>

<span class="n">rule</span> <span class="n">copy_file</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="s1">&#39;results/hello.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/copied_file.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;cp results/hello.txt results/copied_file.txt&#39;</span>
</code></pre></div></td></tr></table></div>
</details>
<details class="success">
<summary>Answer</summary>
<p>Nothing! You get the same message as before, saying that Snakemake did not run anything:
<div class="highlight"><pre><span></span><code>Building<span class="w"> </span>DAG<span class="w"> </span>of<span class="w"> </span>jobs...
Nothing<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span>requested<span class="w"> </span>files<span class="w"> </span>are<span class="w"> </span>present<span class="w"> </span>and<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>date<span class="o">)</span>.
</code></pre></div></p>
<p>When you do not specify a target, the one selected by <strong>default</strong> is the <strong>output of the first rule in the Snakefile</strong>, here <code>results/hello.txt</code> of rule <code>hello_world</code>. While this behaviour may seem weird, it will prove very useful later! In this case, <code>results/hello.txt</code> already exists from your previous runs, so Snakemake doesn&rsquo;t recompute anything.</p>
</details>
<p>Let&rsquo;s try to better understand how rule dependencies work in Snakemake.</p>
<h4 id="chaining-rules">Chaining rules</h4>
<p>The execution principle behind Snakemake is to create a <strong>Directed Acyclic Graph (DAG)</strong> that defines <strong>dependencies between all inputs and outputs</strong> of the workflow. Starting from jobs generating the final desired outputs, Snakemake checks whether required inputs exist. If they do not, it looks for a rule that can generate these inputs and so on until all dependencies are resolved. This is why Snakemake is said to have a &lsquo;bottom-up&rsquo; approach: it starts from last outputs and go back to first inputs.</p>
<details class="bug">
<summary><code>MissingInputException</code></summary>
<p><code>MissingInputException</code> is a common error in Snakemake. It means that Snakemake couldn&rsquo;t find a way to generate targets during DAG computation because an input file is missing. This is a case of <strong>broken dependency</strong> between rules. This error is often caused by typos in input or output paths (for example, output of rule <code>hello_world</code> not matching input of rule <code>copy_file</code>), so make sure to double-check them!</p>
</details>
<p><strong>Exercise:</strong> With this in mind, identify the target you need to use to trigger the execution of rule <code>copy_file</code>. Add the <code>-F</code> parameter to the <code>snakemake</code> command and execute the workflow. What do you see?</p>
<details class="info">
<summary>What do we use <code>-F/--forceall</code> here?</summary>
<p>The <code>-F/--forceall</code> parameter forces the re-creation of <strong>all workflow outputs</strong>. It is used here to avoid manually removing files, but it should be used carefully, especially with large workflows which contains a lot of outputs.</p>
</details>
<details class="success">
<summary>Answer</summary>
<ul>
<li>To trigger the execution of the second rule, you need to use <code>results/copied_file.txt</code> as target. The command is:
<div class="highlight"><pre><span></span><code>snakemake<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>-F<span class="w"> </span>results/copied_file.txt
</code></pre></div></li>
<li>You should now see Snakemake execute two rules and produce both targets/outputs: to generate output <code>results/copied_file.txt</code>, Snakemake requires input <code>results/hello.txt</code>. Before the workflow is executed, this file does not exist, therefore, Snakemake looks for a rule that generates <code>results/hello.txt</code>, here rule <code>hello_world</code>. The process is then repeated for <code>hello_world</code>. In this case, the rule does not require any input, so all dependencies are resolved, and Snakemake can generate the DAG</li>
</ul>
</details>
<p>While it is possible to pass a space-separated list of targets in a Snakemake command, writing all the intermediary outputs does not look like a good idea: it is very time-consuming, error-prone&hellip; and annoying! Imagine what would happen with a workflow generating hundreds of files?! Using rule dependencies effectively solve this problem: you only need to ask Snakemake for the final outputs, and it will create the necessary intermediary outputs by itself!</p>
<h4 id="rule-dependencies-can-be-easier-to-write">Rule dependencies can be easier to write</h4>
<p>Creating rule dependencies using long file paths can be cumbersome, especially when you are dealing with a large number of files/rules. But there is a dedicated Snakemake syntax that makes this process easier to set-up: it is possible (and recommended!) to refer to the output of a rule in another rule with the following syntax: <code>rules.&lt;rule_name&gt;.output</code>. It has several advantages, among which:</p>
<ul>
<li>It limits the risk of error because you do not have to write filenames in several locations</li>
<li>Changes in the output name are automatically propagated to rules that use it, which means that you only need to change the name once, in the rule that defines it</li>
<li>It makes the code much clearer and easier to understand: with this syntax, you instantly know the object type (a <code>rule</code>), how/where it is created (<code>hello_world</code>), and what it is (an <code>output</code>)</li>
</ul>
<details class="warning">
<summary>Rules must produce unique outputs</summary>
<p>Because of rule dependency, it is <strong>mandatory</strong> that an output be generated by a <strong>single rule</strong>. Rules generating the same output are called <strong>ambiguous</strong>. When Snakemake encounters ambiguous rules, it is not able to decide -at least by itself- which rule to use to generate this output, so it stops the execution. In reality, there are solutions to deal with ambiguous rules, but they should be avoided as much as possible, so we will not cover them in this course. See the <a href="https://snakemake.readthedocs.io/en/v8.20.5/snakefiles/rules.html#handling-ambiguous-rules">official documentation</a> for more information).</p>
</details>
<details class="info">
<summary>To quote or not to quote?</summary>
<p>As opposed to strings, like <code>'results/hello.txt'</code>, quotes are not required around <code>rules.&lt;rule_name&gt;.output</code> statements, because they are Snakemake objects.</p>
</details>
<p>The following example implements this syntax for the two rules defined above:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rule</span> <span class="n">hello_world</span><span class="p">:</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/hello.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;echo &quot;Hello world!&quot; &gt; results/hello.txt&#39;</span>

<span class="n">rule</span> <span class="n">copy_file</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
<span class="hll">        <span class="n">rules</span><span class="o">.</span><span class="n">hello_world</span><span class="o">.</span><span class="n">output</span>  <span class="c1"># Dependency syntax</span>
</span>    <span class="n">output</span><span class="p">:</span>
        <span class="s1">&#39;results/copied_file.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s1">&#39;cp results/hello.txt results/copied_file.txt&#39;</span>
</code></pre></div></td></tr></table></div></p>
<p>Try to use this syntax as much as possible in the next series of exercises!</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021-2025 SIB Swiss institute of Bioinformatics - <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>